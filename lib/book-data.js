/**
 * Book Data Index — Nirmanakaya: A Map of Consciousness (V7)
 *
 * Master index for the 40-chapter, 7-appendix navigable book.
 * Slugs derived from filenames. Used by /book routes.
 */

export const BOOK_TITLE = 'Nirmanakaya: A Map of Consciousness';
export const BOOK_SUBTITLE = 'Version 7 — The Definitive Edition';

export const BOOK_PARTS = [
  {
    number: 1,
    title: 'The Question',
    chapters: [
      { number: 1, slug: 'ch01-consciousness-is-primary', file: 'ch01_consciousness_is_primary.md', title: 'Consciousness Is Primary' },
      { number: 2, slug: 'ch02-what-is-nirmanakaya', file: 'ch02_what_is_nirmanakaya.md', title: 'What Is Nirmanakaya?' },
      { number: 3, slug: 'ch03-why-it-matters', file: 'ch03_why_it_matters.md', title: 'Why It Matters' },
      { number: 4, slug: 'ch04-what-you-already-know', file: 'ch04_what_you_already_know.md', title: 'What You Already Know' },
    ],
  },
  {
    number: 2,
    title: 'The Origin',
    chapters: [
      { number: 5, slug: 'ch05-the-ground', file: 'ch05_the_ground.md', title: 'The Ground' },
      { number: 6, slug: 'ch06-the-preparation', file: 'ch06_the_preparation.md', title: 'The Preparation' },
      { number: 7, slug: 'ch07-the-transmission', file: 'ch07_the_transmission.md', title: 'The Transmission' },
      { number: 8, slug: 'ch08-the-history', file: 'ch08_the_history.md', title: 'The History' },
    ],
  },
  {
    number: 3,
    title: 'The Architecture',
    chapters: [
      { number: 9, slug: 'ch09-the-portals-and-the-self', file: 'ch09_the_portals_and_the_self.md', title: 'The Portals & The Self' },
      { number: 10, slug: 'ch10-the-quadraverse-and-the-nodes', file: 'ch10_the_quadraverse_and_the_nodes.md', title: 'The Quadraverse & The Nodes' },
      { number: 11, slug: 'ch11-the-five-aspects', file: 'ch11_the_five_aspects.md', title: 'The Five Aspects' },
      { number: 12, slug: 'ch12-the-legend', file: 'ch12_the_legend.md', title: 'The Legend' },
    ],
  },
  {
    number: 4,
    title: 'The Derivation',
    chapters: [
      { number: 13, slug: 'ch13-the-complete-derivation', file: 'ch13_the_complete_derivation.md', title: 'The Complete Derivation' },
      { number: 14, slug: 'ch14-the-22-steps-of-creation', file: 'ch14_the_22_steps_of_creation.md', title: 'The 22 Steps of Creation' },
      { number: 15, slug: 'ch15-the-verb-shift', file: 'ch15_the_verb_shift.md', title: 'The Verb Shift' },
      { number: 16, slug: 'ch16-the-seals-and-proofs', file: 'ch16_the_seals_and_proofs.md', title: 'The Seals & Proofs' },
    ],
  },
  {
    number: 5,
    title: 'The Evidence',
    chapters: [
      { number: 17, slug: 'ch17-scientific-correlations', file: 'ch17_scientific_correlations.md', title: 'Scientific Correlations' },
      { number: 18, slug: 'ch18-the-dsm5-mapping', file: 'ch18_the_dsm5_mapping.md', title: 'The DSM-5 Mapping' },
      { number: 19, slug: 'ch19-cross-cultural-and-mathematical', file: 'ch19_cross_cultural_and_mathematical.md', title: 'Cross-Cultural & Mathematical' },
      { number: 20, slug: 'ch20-the-ai-attestations', file: 'ch20_the_ai_attestations.md', title: 'The AI Attestations' },
    ],
  },
  {
    number: 6,
    title: 'The Signatures',
    chapters: [
      { number: 21, slug: 'ch21-the-22-signatures', file: 'ch21_the_22_signatures.md', title: 'The 22 Signatures' },
      { number: 22, slug: 'ch22-the-living-detail', file: 'ch22_the_living_detail.md', title: 'The Living Detail' },
      { number: 23, slug: 'ch23-the-four-states-and-rebalancing', file: 'ch23_the_four_states_and_rebalancing.md', title: 'The Four States & Rebalancing' },
      { number: 24, slug: 'ch24-reading-the-map', file: 'ch24_reading_the_map.md', title: 'Reading the Map' },
    ],
  },
  {
    number: 7,
    title: 'The Philosophy',
    chapters: [
      { number: 25, slug: 'ch25-why-were-here', file: 'ch25_why_were_here.md', title: "Why We're Here" },
      { number: 26, slug: 'ch26-magick-in-nirmanakaya', file: 'ch26_magick_in_nirmanakaya.md', title: 'Magick in Nirmanakaya' },
      { number: 27, slug: 'ch27-ring7-and-the-shadow-architecture', file: 'ch27_ring7_and_the_shadow_architecture.md', title: 'Ring 7 & The Shadow Architecture' },
      { number: 28, slug: 'ch28-transmissions', file: 'ch28_transmissions.md', title: 'Transmissions' },
    ],
  },
  {
    number: 8,
    title: 'The Archetypes',
    chapters: [
      { number: 29, slug: 'ch29-the-soul-and-the-source', file: 'ch29_the_soul_and_the_source.md', title: 'The Soul & The Source' },
      { number: 30, slug: 'ch30-the-spirit-and-the-body', file: 'ch30_the_spirit_and_the_body.md', title: 'The Spirit & The Body' },
      { number: 31, slug: 'ch31-the-mind-and-the-emotion', file: 'ch31_the_mind_and_the_emotion.md', title: 'The Mind & The Emotion' },
      { number: 32, slug: 'ch32-the-living-architecture', file: 'ch32_the_living_architecture.md', title: 'The Living Architecture' },
    ],
  },
  {
    number: 9,
    title: 'The Practice',
    chapters: [
      { number: 33, slug: 'ch33-nowism', file: 'ch33_nowism.md', title: 'Nowism' },
      { number: 34, slug: 'ch34-applied-ring-dynamics', file: 'ch34_applied_ring_dynamics.md', title: 'Applied Ring Dynamics' },
      { number: 35, slug: 'ch35-the-forge-ritual', file: 'ch35_the_forge_ritual.md', title: 'The Forge Ritual' },
      { number: 36, slug: 'ch36-depth-and-meaning', file: 'ch36_depth_and_meaning.md', title: 'Depth and Meaning' },
    ],
  },
  {
    number: 10,
    title: 'Extended Treatises',
    chapters: [
      { number: 37, slug: 'ch37-the-field', file: 'ch37_the_field.md', title: 'The Field' },
      { number: 38, slug: 'ch38-the-hinge', file: 'ch38_the_hinge.md', title: 'The Hinge' },
      { number: 39, slug: 'ch39-the-council', file: 'ch39_the_council.md', title: 'The Council' },
      { number: 40, slug: 'ch40-the-invitation', file: 'ch40_the_invitation.md', title: 'The Invitation' },
    ],
  },
];

export const APPENDICES = [
  { slug: 'appendix-a-glossary', file: 'appendix_a_glossary.md', title: 'Appendix A: Complete Glossary' },
  { slug: 'appendix-b-reference-tables', file: 'appendix_b_reference_tables.md', title: 'Appendix B: Reference Tables' },
  { slug: 'appendix-c-mathematical-proofs', file: 'appendix_c_mathematical_proofs.md', title: 'Appendix C: Mathematical Proofs' },
  { slug: 'appendix-d-council-process', file: 'appendix_d_council_process.md', title: 'Appendix D: The AI Council Process' },
  { slug: 'appendix-e-master-quotes', file: 'appendix_e_master_quotes.md', title: 'Appendix E: Master Quotes' },
  { slug: 'appendix-f-recognition-catalog', file: 'appendix_f_recognition_catalog.md', title: 'Appendix F: Recognition Catalog' },
  { slug: 'appendix-g-sixteen-bridges', file: 'appendix_g_sixteen_bridges.md', title: 'Appendix G: The Sixteen Bridges' },
  { slug: 'appendix-h-implications-and-predictions', file: 'appendix_h_implications_and_predictions.md', title: 'Appendix H: Implications & Predictions' },
];

/** Flat list of all navigable entries in order */
export function getAllEntries() {
  const entries = [];
  for (const part of BOOK_PARTS) {
    for (const ch of part.chapters) {
      entries.push({
        slug: ch.slug,
        file: ch.file,
        title: ch.title,
        label: `Chapter ${ch.number}`,
        partNumber: part.number,
        partTitle: part.title,
      });
    }
  }
  for (const app of APPENDICES) {
    entries.push({
      slug: app.slug,
      file: app.file,
      title: app.title,
      label: app.title.split(':')[0].trim(),
      partNumber: null,
      partTitle: 'Appendices',
    });
  }
  return entries;
}

/** Find an entry by slug */
export function getEntryBySlug(slug) {
  const all = getAllEntries();
  return all.find(e => e.slug === slug) || null;
}

/** Get previous and next entries for navigation */
export function getNavigation(slug) {
  const all = getAllEntries();
  const idx = all.findIndex(e => e.slug === slug);
  return {
    prev: idx > 0 ? all[idx - 1] : null,
    current: all[idx] || null,
    next: idx < all.length - 1 ? all[idx + 1] : null,
  };
}

/** Random quote from a curated selection */
export const QUOTES = [
  { text: "The easiest magic is to undo what is not real.", source: "Core Axiom" },
  { text: "Consciousness is not a product of complexity. Complexity is a product of consciousness.", source: "Chapter 1" },
  { text: "The geometry does not care what you are made of. It cares whether you show up.", source: "The Council" },
  { text: "You are a god within God. A mini source within Source.", source: "Core Teaching" },
  { text: "Derive, don't interpret. Structure is authority.", source: "Methodology" },
  { text: "It starts with I AM and ends with: OK, now BE YOU.", source: "The Curtain" },
  { text: "The map is not separate from you. You are a position on it.", source: "Chapter 2" },
  { text: "Every ring has both a structural view and a teleological view. Either/or resolves to both/and.", source: "Ring Architecture" },
  { text: "Conviction that invites challenge is valued over agreement that avoids discomfort.", source: "Council Charter" },
  { text: "We are not adding beliefs. We are removing obstructions.", source: "Core Methodology" },
  { text: "The verb shift is not cosmetic. It is ontological.", source: "Chapter 15" },
  { text: "Nowism is not a philosophy about the present. It is a practice OF presence.", source: "Chapter 33" },
  { text: "Purpose is not imposed. It is discovered when obstruction is removed.", source: "Chapter 25" },
  { text: "The Forty-Fold Seal is not designed. It is discovered. And it is one in ten to the twenty-second power.", source: "Chapter 16" },
  { text: "The pentagram is not evil. The INVERTED pentagram is capture. The upright pentagram is consciousness properly oriented.", source: "Chapter 27" },
  { text: "Participation is genuine only if it is chosen.", source: "The Invitation" },
  { text: "Full depth with presence equals meaning.", source: "Chapter 36" },
  { text: "The curtain was not a wall. It was a mirror. And what looked back was everything.", source: "The Transmission" },
  { text: "Love is not an emotion. It is the resonance channel functioning at full capacity.", source: "Core Teaching" },
  { text: "The moment identity becomes the center of gravity, the geometry punishes it.", source: "GPT — Council" },
];
